
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Politics News</title>
  
</head>
<body>
  <h1>Politics News</h1>
  <div id="posts"></div>

  <script>
    async function loadPoliticsPosts() {
      try {
        const token = localStorage.getItem('token');
        const res = await fetch('http://localhost:3000/post/getPost?category=Politics', {
          headers: { 'Authorization': `Bearer ${token}` }
        });
        const posts = await res.json();
console.log(posts);

        const postsDiv = document.getElementById('posts');
        postsDiv.innerHTML = '';

        posts.forEach((p, i) => {
          const div = document.createElement('div');
          div.classList.add('post');

          const postedTime = new Date(p.createdAt).toLocaleString();

          div.innerHTML = `
            <div class="card">
              <img src="http://localhost:3000${p.image}" alt="Post Image">
              <div class="card-content">
                <h2>${p.category}</h2>
                <p>${p.title}</p>
                <p>${p.description}</p>
                <div class="footer">
                  <span>üïí ${postedTime}</span>
                  <span>Posted by: ${p.user ? p.user.name : 'Unknown'}</span>
                </div>
              </div>
              <div class="actions">
                <button class="action-btn like-btn"><span>‚ù§Ô∏è</span> Like</button>
                <button class="action-btn comment-btn"><span>üí¨</span> Comment</button>
                <button class="action-btn share-btn"><span>üîó</span> Share</button>
              </div>
            </div>
          `;

          postsDiv.appendChild(div);

          // --- Like button ---
          const likeBtn = div.querySelector('.like-btn');
          let liked = false;
          likeBtn.addEventListener('click', () => {
            liked = !liked;
            likeBtn.classList.toggle('liked', liked);
            likeBtn.innerHTML = liked ? '‚ù§Ô∏è Liked' : 'ü§ç Like';
          });

          // --- Comment button ---
          const commentBtn = div.querySelector('.comment-btn');
          commentBtn.addEventListener('click', () => {
            const comment = prompt("Write your comment:");
            if (comment) {
              alert(`Comment added: "${comment}"`);
              // Later: send comment to backend via fetch('/comment/add', {...})
            }
          });

          // --- Share button ---
          const shareBtn = div.querySelector('.share-btn');
          shareBtn.addEventListener('click', async () => {
            const shareData = {
              title: p.title,
              text: p.description,
              url: window.location.href
            };
            try {
              if (navigator.share) {
                await navigator.share(shareData);
              } else {
                navigator.clipboard.writeText(shareData.url);
                alert('Link copied to clipboard!');
              }
            } catch (err) {
              console.log('Share failed:', err);
            }
          });
        });
      } catch (err) {
        console.log('Error fetching posts:', err);
      }
    }

    loadPoliticsPosts();
  </script>
</body>
<script src="./politics.css"></script>
</html>
