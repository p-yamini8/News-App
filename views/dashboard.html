<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Account Details</title>
  <style>
    #account-details {
      display: none; /* hidden initially */
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 10px;
      border-radius: 8px;
      width: 250px;
    }
    button {
      padding: 10px 15px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

    <div id="head">
        <h1>News Express</h1>

    </div>
    <div>
        <nav>
            <a href="./news/news.html">News</a>
            <a href="./politics/politics.html">Politics</a>
            <a href="./business/business.html">Business</a>
            <a href="./fun/fun.html">Fun</a>
            <a href="./sports/sports.html">Sports</a>
            <a href="./movies/movies.html">Movies</a>
            <a href="admin.html" style="display: block;">Admin</a>
            <button id="account-btn">Account</button>

  <div id="account-details">
  <h3>Your Account</h3>
  <p><strong>Name:</strong> <span id="acc-name"></span></p>
  <p><strong>Email:</strong> <span id="acc-email"></span></p>
  <p><strong>Plan:</strong> <span id="acc-plan"></span></p>
  <p><strong>Likes</strong><ol id="likes"></ol></p>
  <p><strong>UnLikes</strong><ol id="unlikes"></ol></p>
</div>

<script>
  const accountBtn = document.getElementById('account-btn');
  const accountDetails = document.getElementById('account-details');

  const nameSpan = document.getElementById('acc-name');
  const emailSpan = document.getElementById('acc-email');
  const planSpan = document.getElementById('acc-plan');

  // Toggle visibility
  accountBtn.addEventListener('click', () => {
    accountDetails.style.display = accountDetails.style.display === 'none' ? 'block' : 'none';
  });

  // Fetch user details from backend
  async function loadAccountDetails() {
    try {
      const token = localStorage.getItem('token');
      if (!token) return;

      const res = await fetch('http://localhost:3000/user/profile', {
        headers: { 'Authorization': `Bearer ${token}` }
      });

      if (!res.ok) throw new Error('Failed to fetch user');

      const user = await res.json();
      console.log('user details',user)
      nameSpan.textContent = user.name;
      emailSpan.textContent = user.email;
      planSpan.textContent = user.plan || 'Free';
    } catch (err) {
      console.error('Error loading account:', err);
    }
  }

  loadAccountDetails();
</script>


        </nav>
    </div>
</body>
</html>
